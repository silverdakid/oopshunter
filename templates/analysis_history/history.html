{% extends "index.html" %}

{% block body %}
    <table class="table">
        <thead>
            <tr>
                <th class="p-3">Title</th>
                <th class="p-3">Date</th>
                <th class="p-3">Document</th>
                <th class="p-3">Sensitive data count</th>
                <th class="p-3">Action</th>
            </tr>
        </thead>
        <tbody>
            {% for a in analysis %}
                <tr>
                    <td class="p-3">{{ a.title }}</td>
                    <td class="p-3">{{ a.date_analysis }}</td>
                    <td class="p-3">{{ a.document_title }}</td>
                    <td class="p-3
                        {% if 0 <= a.sensitive_data_counted <= 3 %} text-success
                        {% elif 8 <= a.sensitive_data_counted %} text-danger
                        {% else %} text-dark
                        {% endif %}">
                        {{ a.sensitive_data_counted }}
                    </td>
                    <td class="p-3" class="d-flex align-items-center">
                        <a href="{{ url_for('analysis.show_analysis', analysis_id=a.id) }}" class="btn btn-sm text-dark rounded-circle">  <i class="bi bi-eye-fill"></i></a>
                        <form action="{{ url_for('analysis.delete_analysis_route', analysis_id=a.id) }}" 
                        method="POST" 
                        class="d-inline"
                        onsubmit="return confirm('Are you sure you want to delete this analysis?');">
                      <button type="submit"
                              class="btn btn-sm ms-3 text-danger rounded-circle border-0">
                          <i class="bi bi-trash-fill"></i>
                      </button>
                  </form>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}